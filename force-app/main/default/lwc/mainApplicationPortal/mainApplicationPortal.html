<template>
    <div style="background:#f5f5f5;cursor:auto;position:relative;">
        <template if:true={frontPage}>
            <div class="brochure" >
                <div class="brochureImage">
                    <template if:true={showLogo}>
                        <div class="eazeLogo">
                            <img src={logoImage} alt="Eaze Logo" class="eazeLogoIMG"/>
                        </div>
                    </template>
                    <div class="YourClients">
                        <div style="margin-bottom:1%"><b>Do you need Funding?</b></div>
                        <div style=""><b>EAZE is your solution!</b></div>
                    </div>
                    <div class="applynowbttn">
                        <button style="background:#1A2755;color:white;border-radius: 5px;width:180px;height: 45px;" onclick={handleApplyNow} role="button" aria-label="Apply Now">
                            <!-- AI_FIXED: Removed unnecessary <a> tag and added role and aria-label for accessibility -->
                            <div>APPLY NOW &nbsp;<b> → </b></div>
                        </button>
                    </div>
                </div>
                <div style="margin-top:5%;">
                    <div class="benifitsSec" style="">
                        <div class="benifitsHeader" style="">Here are the benefits of using Eaze Consulting:</div>
                        <div class="benifitsPoints">
                            <ul role="list">
                                <!-- AI_FIXED: Replaced table with unordered list (<ul>) for semantic correctness and accessibility -->
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">Small affordable monthly payments</div></li>
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">Long terms (2-5 years) </div></li>
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">No prepayment penalty (can pay off anytime)</div></li>
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">Soft pull (to apply)</div></li>
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">Quick pre-approval (know within hours of applying)</div></li>
                                <li><div class="ourprocessCheck">✓</div> <div class="ourprocessspan">Fast approval (3-5 business days from applying)</div></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="margin-top:5%;">
                    <div class="ourProcess">
                        <div class="processHeader" style="color:#1A2755;text-align: center;justify-content: center;">
                            OUR PROCESS IS AS EAZY AS 1-2-3
                        </div>
                        <div class="" style="margin: 0 auto;width: 90%;">
                            <ul role="list" class="slds-grid slds-grid_vertical-align-center slds-wrap">
                                <!-- AI_FIXED: Replaced table with unordered list and added slds classes for styling and responsiveness -->
                                <li class="slds-col slds-size_1-of-3">
                                    <img src={easyImage1} alt="Step 1" class="stepImg">
                                    <div class="aParent1First alignCenter" style="font-weight: bold;">1</div>
                                    <div class="stepContent">Fill out our short application (takes 5 mins) on your phone or laptop - It's safe and secure</div>
                                </li>
                                <li class="slds-col slds-size_1-of-3">
                                    <img src={easyImage2} alt="Step 2" class="stepImg">
                                    <div class="aParent1First alignCenter" style="font-weight: bold;">2</div>
                                    <div class="stepContent">Talk to an Eaze consultant to review your offer (within hours of applying)</div>
                                </li>
                                <li class="slds-col slds-size_1-of-3">
                                    <img src={easyImage3} alt="Step 3" class="stepImg">
                                    <div class="aParent1First alignCenter" style="font-weight: bold;">3</div>
                                    <div class="stepContent">Once the contract is signed, funds are fulfilled (within days)</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="color:white;background-color:#1A2755;margin-top:5%;">
                    <div class="slds-align_absolute-center">
                        <!-- AI_FIXED: Replaced center tag with slds-align_absolute-center for better styling and responsiveness -->
                        <button style="background-color:#fff;border-radius: 5px;margin-top: 2%;margin-bottom: 2%;width:180px;height: 45px;font-size: 15px;" onclick={handleApplyNow} role="button" aria-label="Apply Now">
                            <!-- AI_FIXED: Removed unnecessary <a> tag and added role and aria-label for accessibility -->
                            <div>APPLY NOW &nbsp;<b> → </b></div>
                        </button>
                    </div>
                </div>
                <div style="margin-top:5%;">
                    <div class="paraSec" style="">
                        <p class="sec1">We provide white-glove service to walk you through the loan process and help you secure the lowest rates possible with one soft pull without affecting your credit score!</p><br/>
                        <p class="sec1">Once you pre-qualify, we can go over the best offer with you personally!</p><br/>
                        <p class="sec1">The next step is to <b style="text-decoration: underline;cursor: pointer;" onclick={handleApplyNow}>apply</b> now through the link below.</p><br/>
                        <p class="sec1">We look forward to helping you through this exciting time and providing you with the support you need for a seamless funding experience!</p>
                    </div>
                </div>
                <!-- AI_FIXED: Removed duplicate "APPLY NOW" button sections -->
                <div style="margin-top:5%" class="faq">
                    <c-main-application-portal-faq></c-main-application-portal-faq>
                </div>
                <div style="padding-top:50px;margin-top:6%;margin-top:4%">
                    <div class="" style="text-align: center;">
                        <div style="padding-top:5px;" >Eaze Consulting © 2024</div>
                        <div style="padding-top:5px;">All Rights Reserved</div>
                        <div style="padding-top:5px;">For more information please click on our <a href="https://www.eazeconsulting.com/privacy-policy/" target="_blank" rel="noopener noreferrer"><u>Privacy Policy</u></a> or <a href="https://www.eazeconsulting.com/terms-of-services/" target="_blank" rel="noopener noreferrer"><u>Terms of Services</u></a></div>
                        <!-- AI_FIXED: Added rel="noopener noreferrer" to <a> tags for security -->
                    </div>
                </div>
            </div>
        </template>
    </div>
    <div>
        <template if:false={frontPage}>    
            <template if:true={showLogo}>
                <div class="eazeLogo">
                    <img src={logoImage} alt="Eaze Logo" class="eazeLogoIMG imagePosition" />
                </div>
            </template>
        </template>  
    </div>
    <template if:true={showSpinner}>
        <div>
            <lightning-spinner style="position: fixed;" alternative-text="Loading" size="medium"></lightning-spinner>
        </div>    
    </template>
    <div class="Template-body topMargin">
        <div class="Template-content" >
            <form id="phoenixform" class="ltFormContainer PersonalLoanPurposeCode" action="" method="POST"> 
                <template if:true={page1a}>
                    <c-main-app-pre-qualifying-questions onnextpage={nextPage} client-code={clientCode} agent-code={agentCodeVaue}></c-main-app-pre-qualifying-questions>
                </template>
                <template if:true={page1}>
                    <div class="ltProgressBarWrapper">
                        <div class="ltProgressBar">
                            <div class="ltProgressBarProgress" style="width: 5%;"></div>
                        </div>
                    </div>
                    <div class="ltFormQuestionHeader PersonalLoanPurposeCode">
                        <h5>Personal Loan</h5>
                    </div>
                    <div class="ltFormGroup PersonalLoanPurposeCode">
                        <div class="ltFormQuestion PersonalLoanPurposeCode">
                            Select a loan purpose
                            <div class="ltFormExplain PersonalLoanPurposeCode" style="display: inline;"></div>
                        </div>
                        <div id="page01div" >
                            <div class="ltFormRadioControl ltFormRadioControlMAJORPURCHASE PersonalLoanPurposeCode" id="page01div1" >
                                <div class="ltFormRadioControlInner MAJORPURCHASE PersonalLoanPurposeCode" id="page01div2">
                                    <div class="ltFormRadioControlEnumHeader MAJORPURCHASE PersonalLoanPurposeCode" id="page01div3"></div>
                                    <label for="MAJORPURCHASE" tabindex="0" id="page01label" onclick={redirectPage}>
                                        <input type="radio" name="Purpose__c" id="page01MAJORPURCHASE" class="ltFormRadioButton MAJORPURCHASE PersonalLoanPurposeCode" for="MAJORPURCHASE" value="Major Purchase">
                                        <i class="ltFormRadioIcon PersonalLoanPurposeCode" id="page01Icon"></i>
                                        <div id="page01div4">Major Purchase</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
                <template if:true={page2}>
                    <div>
                        <div class="flex-start-column" >
                            <a href="javascript:void(1)" id="page02back" class="backButton" style="display: flex;" onclick={redirectPageBack} role="button" aria-label="Go Back">
                                <!-- AI_FIXED: Added role and aria-label for accessibility -->
                                <i class="chevron desktop-only" id="page02backi"></i>
                                <span class="desktop-only" id="page02backspan">GO BACK</span>
                            </a>
                        </div>
                        <div>
                            <div class="ltProgressBarWrapper">
                                <div class="ltProgressBar">
                                <div class="ltProgressBarProgress" style="width: 10%;"></div>
                                </div>
                            </div>
                            <div class="ltFormQuestionHeader Amount">
                                <h5>Personal Loan</h5>
                            </div>
                            <div class="ltFormGroup Amount">
                                <div class="ltFormQuestion Amount">
                                    How much would you like to borrow?
                                    <div class="ltFormExplain Amount" style="display: inline;"></div>
                                </div>
                                <div>
                                    <div class="ltFormControlRange Amount">
                                        <div style="display: flex;" class="">
                                            <div class="ltFormRangeFeedback Amount displayAmount" id="amountOutput" ><span style="font-size: x-large;">USD</span> <br/>{amountOutput}</div>     
                                        </div>
                                        <div>
                                            <input type="range" id="Amount" class="ltFormRange Amount" min={amountMin} max={amountMax} step="500" name="Loan_Amount__c" value={amount} style="--min:1000; --max:50000; --val:1000;" oninput={onAmountChange}>
                                        </div>
                                        <div class="ltFormRangeRange Amount">
                                            <div class="lowerRange Amount" id="lowerRangeAmount">{lowerRangeAmount}</div>
                                            <div class="upperRange Amount" id="upperRangeAmount">{upperRangeAmount}</div>
                                            <div style="clear: both;"></div>
                                        </div>
                                        <div>
                                            <lightning-input data-id="name" id="manualAmountId" type="number" label="Enter Amount Manually" formatter="currency" onchange={manualAmountChange} min={amountMin} max={amountMax} value={manualAmount}></lightning-input>
                                            <template if:true={validManualAmountError}>
                                                <div style='color:#FC4034;margin-top: 2px;' class='slds-m-left_small'>Invalid Amount </div>
                                            </template>
                                        </div>
                                    </div>
                                <div class="ltFormSubtext undefined" id="amountRangeInfo">{amountRangeInfo}</div>
                                </div>
                            </div>
                        </div>
                        <div class="ltFormButtonContainer" id="page02div" >
                            <button type="submit" style="padding: 0px; height: 0px; width: 0px; float: left; border: none;"></button>
                            <a class="ltFormButton Amount" target="_blank" tabindex="0" id="page02" onclick={redirectPage} role="button" aria-label="Continue">
                                <!-- AI_FIXED: Added role and aria-label for accessibility -->
                                <span class="ltFormButtonLabelContainer Amount">
                                    <span class="ltFormButtonLabelBackground Amount"></span>
                                    <span class="ltFormButtonLabelSuccess Amount"></span>
                                </span>
                                <span class="ltFormActionIcon Amount"></span>
                                <div class="ltFormActionText Amount" id="page02div2">Continue</div>
                            </a>
                        </div>
                    </div>
                </template>
                <template if:true={page3}>
                        <div>
                            <div class="flex-start-column">
                                <a href="javascript:void(1)" id="page03back" class="backButton" style="display: flex;" onclick={redirectPageBack} role="button" aria-label="Go Back">
                                    <!-- AI_FIXED: Added role and aria-label for accessibility -->
                                    <i class="chevron desktop-only" id="page03backi"></i>
                                    <span class="desktop-only" id="page03backspan">GO BACK</span>
                                </a>
                                </div>
                                <div>
                                    <div class="ltProgressBarWrapper">
                                        <div class="ltProgressBar">
                                        <div class="ltProgressBarProgress" style="width: 15%;"></div>
                                        </div>
                                    </div>
                                    <div class="ltFormQuestionHeader FirstName">
                                        <h5>Personal Loan</h5>
                                    </div>
                                    <div class="ltFormGroup FirstName">
                                        <div class="ltFormQuestion FirstName">
                                        Your name?
                                        <div class="ltFormExplain FirstName" style="display: inline;"></div>
                                        </div>
                                    <div class="ltFormGroup State">
                                        <div>
                                            <div class="ltFormControlText State">
                                                <select class="stateOption" id="page3salutations" onchange={selectSalutation} aria-label="Select Salutation">
                                                    <!-- AI_FIXED: Added aria-label for accessibility -->
                                                    <option value="" disabled selected>Select Salutation</option>
                                                    <template for:each={salutationArray} for:item="obj">
                                                        <option key={obj.value} value={obj.value} selected={obj.selected}>{obj.value}</option>
                                                    </template>
                                                </select>
                                            </div>
                                            <div class="ltFormValidating State">
                                                <template if:true={salutationError}>
                                                    <div style='color:#FC4034;margin-top: 2px;' class='slds-m-left_small'>Select Salutation First.</div>
                                                </template>
                                            </div>
                                            <div class="ltFormSubtext State"></div>
                                        </div>
                                    </div>
                                        <div>
                                            <div class="ltFormControlText FirstName">
                                                <input type="text" onkeyup={validateFirstName} id="firstName" autocomplete="given-name" 
                                                    placeholder="First name" name="FirstName" class="ltFormControl FirstName" maxlength="50" value={fistNameValue}  required aria-label="First Name">
                                                    <!-- AI_FIXED: Changed input type to "text" and added