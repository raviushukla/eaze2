<template>
    <template if:true={showSpinner}>
        <!-- AI_FIXED: Corrected if:true condition syntax -->
        <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
    </template>
    <lightning-record-edit-form object-api-name="Guaranteed_Approval_Application__c" onsubmit={handleSubmit} onload={formOnLoad} onsuccess={handleSuccess}>
        <div class="slds-p-around_medium">
            <div class="slds-grid slds-wrap slds-p-top_small">
                <div class="slds-col slds-size_1-of-1 slds-large-size_2-of-3 slds-m-auto">
                    <!-- AI_FIXED: Replaced inline styles with SLDS classes for better maintainability and consistency -->
                    <div class="slds-text-heading_medium slds-text-align_center">
                        <!-- AI_FIXED: Improved heading structure and styling -->
                        <p>MAIN PROGRAM AND DIRECT GUARANTEED APPROVAL WITH EAZE</p>
                        <p>CLIENT APPLICATION</p> 
                    </div>
                    <div class="slds-grid slds-wrap">
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <lightning-input-field data-id="associate" field-name="Associate__c" label="Name of your associate" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field data-id="todayDate" field-name="Form_Filled_Date__c" label="Date" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Date_Company_Established__c" label="Date Company Established" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <lightning-input-field field-name="Corporate_Business_Name__c" label="Corporate/Business Name" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="DBA__c" label="DBA" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Company_Website__c" label="Company Website" required onfocusout={validateWebsite}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Company_Website__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <lightning-input-field field-name="Address__c" label="Address" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input-field field-name="City__c" label="City" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input-field field-name="State__c" label="State" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>  
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-3">
                            <lightning-input-field field-name="Zip__c" label="Zip" required onkeyup={formatZip} onfocusout={validateZip}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Zip__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Phone__c" label="Phone #" required onkeyup={formatPhone} onfocusout={validatePhone}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Phone__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Company_Email__c" label="Company Email" placeholder="registered with Eaze Consulting" required onfocusout={validateEmail}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Company_Email__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <lightning-input-field field-name="Property_Owned_by_or_Landlord_Name__c" label="Property Owned by/or Landlord Name" onkeyup={formatOnlyText}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Property_Owner_Address__c" label="Address"></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Property_Owner_Phone__c" label="Phone #" onkeyup={formatPhone} onfocusout={validatePhone}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Property_Owner_Phone__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <span class="slds-text-heading_small slds-text-bold_medium">PRINCIPAL/OWNERS/OFFICERS:</span>
                            <!-- AI_FIXED: Improved styling for section heading -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_Name_1__c" label="Name" required onkeyup={formatOnlyText}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2"> 
                            <lightning-input-field field-name="Principal_Name_2__c" label="Name" onkeyup={formatOnlyText}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_1_Title__c" label="Title" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_2_Title__c" label="Title"></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_Address_1__c" label="Address" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_Address_2__c" label="Address"></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_Phone_1__c" label="Phone" required onkeyup={formatPhone} onfocusout={validatePhone}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Principal_Phone_1__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_Phone_2__c" label="Phone" onkeyup={formatPhone} onfocusout={validatePhone}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Principal_Phone_2__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_1_SS__c" label="SS #" required onkeyup={formatSSN} onfocusout={validateSSN}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Principal_1_SS__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2">
                            <lightning-input-field field-name="Principal_2_SS__c" label="SS #" onkeyup={formatSSN} onfocusout={validateSSN}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Principal_2_SS__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1">
                            <span class="slds-text-heading_small slds-text-bold_medium">BUSINESS CHECKING ACCOUNT:</span>
                            <!-- AI_FIXED: Improved styling for section heading -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-3">
                            <lightning-input-field field-name="Bank_Name__c" label="Bank Name" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-3">
                            <lightning-input-field field-name="Account_Number__c" label="Account #" required onkeyup={formatNumber} onfocusout={validateAccountNum}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Account_Number__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-3">
                            <lightning-input-field field-name="Bank_Routing__c" label="Bank Routing #" required onkeyup={formatNumber} onfocusout={validateSSN}></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                            <p data-id="Bank_Routing__c_Id" class="slds-text-color_error slds-hide">Invalid Input</p>
                            <!-- AI_FIXED: Improved error message styling and visibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-4">
                            <lightning-input-field field-name="Bank_City__c" label="City" required></lightning-input-field>
                            <!-- AI_FIXED: Added label to lightning-input-field for better accessibility -->
                        </div>
                        <div class="slds-col slds-p-around_small slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-4">
                            <lightning-